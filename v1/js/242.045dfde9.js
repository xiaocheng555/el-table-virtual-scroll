"use strict";(self["webpackChunkel_table_virtual_scroll"]=self["webpackChunkel_table_virtual_scroll"]||[]).push([[242],{90242:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"custom-tree-table"},[t("el-table",{ref:"tableDataRef",attrs:{data:e.tableData,"max-height":"400","row-key":"id",border:"","tree-props":{children:"child"},"default-expand-all":""}},[t("el-table-column",{attrs:{width:"55",align:"center",type:"index",label:"序号"}}),t("el-table-column",{attrs:{label:"参数名",prop:"key","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(n){var l=n.row;return[l.isEdit?t("el-input",{attrs:{placeholder:"请输入"},model:{value:l.key,callback:function(t){e.$set(l,"key",t)},expression:"row.key"}}):t("span",[e._v(e._s(l.key))])]}}])}),t("el-table-column",{attrs:{label:"数据类型",prop:"type","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(n){var l=n.row;return[l.isEdit?t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{change:function(t){return e.handleDataTypeChange(t,l)}},model:{value:l.type,callback:function(t){e.$set(l,"type",t)},expression:"row.type"}},e._l(e.source.dataTypeOptions,(function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1):t("span",[e._v(e._s(l.type))])]}}])}),t("el-table-column",{attrs:{label:"操作","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(n){var l=n.row,a=n.$index;return[t("el-tooltip",{attrs:{"hide-after":e.hideAfter,"open-delay":e.openDelay,effect:"dark",content:"添加",placement:"top"}},[t("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){return e.onAddSibling(l,a)}}})],1),"object"===l.type?t("el-tooltip",{attrs:{"hide-after":e.hideAfter,"open-delay":e.openDelay,effect:"dark",content:"添加子节点",placement:"top"}},[t("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.onAddChild(l,a)}}})],1):e._e(),l.isEdit?e._e():t("el-tooltip",{attrs:{"hide-after":e.hideAfter,"open-delay":e.openDelay,effect:"dark",content:"编辑",placement:"top"}},[t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.onEdit(l,a)}}})],1),l.isEdit?t("el-tooltip",{attrs:{"hide-after":e.hideAfter,"open-delay":e.openDelay,effect:"dark",content:"保存",placement:"top"}},[t("el-button",{attrs:{type:"text",icon:"el-icon-circle-check"},on:{click:function(t){return e.onSave(l,a)}}})],1):e._e(),t("el-tooltip",{attrs:{"hide-after":e.hideAfter,"open-delay":e.openDelay,effect:"dark",content:"删除",placement:"top"}},[t("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.onDelete(l,a)}}})],1)]}}])},[t("template",{slot:"header"},[t("el-tooltip",{staticClass:"item",attrs:{"hide-after":500,effect:"dark",content:"添加根节点",placement:"top"}},[t("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.onAddRoot}})],1)],1)],2)],1)],1)},a=[];function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={name:"CustomTreeTable",data:function(){return{source:{dataTypeOptions:[{label:"Array",value:"array"},{label:"String",value:"string"},{label:"Boolean",value:"boolean"},{label:"Object",value:"object"},{label:"Number",value:"number"}]},hideAfter:1500,openDelay:500,tableData:[{key:"name",type:"string",child:null},{key:"age",type:"integer",child:null},{key:"response",type:"object",child:[{key:"childrenone",type:"string",child:null},{key:"childrentwo",type:"boolean",child:null}]},{key:"address",type:"string",child:null}]}},created:function(){this.tableData=this.handleTableDataFormat(this.tableData)},methods:{handleTableDataFormat:function(e){var t=this,n=function e(n,l){n.forEach((function(n){n.isEdit=!1,n.parentId=l||"0",n.id=t.generateId(),n.child&&n.child.length>0&&e(n.child,n.id)}))};return n(e),console.log("Format tableData",e),e},generateId:function(){return"id_".concat((new Date).getTime()).concat(Math.floor(1e4*Math.random()))},handleDataTypeChange:function(e,t){t.type=e,this.$set(t,"type",e),"object"===e&&this.$set(t,"child",[])},generateRow:function(e){return{id:this.generateId(),key:"",type:"",isEdit:!0,parentId:e}},onAddRoot:function(){this.tableData.push(this.generateRow("0"))},handleAddOneRow:function(e,t,n){var l=e.parentId,a=e.id,i="SIBLING"===n?l:a,o={},c=function e(t){t.forEach((function(t){t.id===i&&(o=r({},t)),t.child&&t.child.length&&e(t.child)}))};c(this.tableData);var d=o,s=d.id,u=d.child;u?u.push(this.generateRow(s)):this.$set(o,"child",[this.generateRow(s)])},onAddSibling:function(e,t){console.log("onAddSibling",e,t);var n=e.parentId;"0"===n?this.tableData.push(this.generateRow("0")):this.handleAddOneRow(e,t,"SIBLING")},onAddChild:function(e,t){this.handleAddOneRow(e,t,"CHILD")},onEdit:function(e){this.$set(e,"isEdit",!0)},onSave:function(e){this.$set(e,"isEdit",!1)},onDelete:function(e){var t=this,n='<div><span style="color: #F56C6C">删除后将不可恢复</span>，你还要继续吗？</div>';this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,type:"warning"}).then((function(){var n=e.parentId,l=e.id;if("0"===n){var a=t.tableData.findIndex((function(e){return e.id===l}));t.tableData.splice(a,1)}else{var i={},o=function e(t){t.forEach((function(t){t.id===n&&(i=r({},t)),t.child&&t.child.length&&e(t.child)}))};o(t.tableData);var c=i,d=c.child,s=d.findIndex((function(e){return e.id===l}));d.splice(s,1)}})).catch((function(){}))}}},d=c,s=n(1001),u=(0,s.Z)(d,l,a,!1,null,"354f3ba0",null),p=u.exports}}]);
//# sourceMappingURL=242.045dfde9.js.map