{"version":3,"file":"Rowspan-CxuAs6zD.js","sources":["../../src/views/Rowspan.vue?vue&type=template&lang.js","../../src/views/Rowspan.vue"],"sourcesContent":["\n<div>\n  <virtual-scroll\n    ref=\"virtualScroll\"\n    key-prop=\"id\"\n    :data=\"list\"\n    :item-size=\"62\"\n    :row-span-key=\"getRowSpanKey\"\n    @change=\"(virtualList) => tableData = virtualList\">\n    <el-table\n      :data=\"tableData\"\n      ref=\"table\"\n      border\n      row-key=\"id\"\n      height=\"600px\"\n      style=\"width: 100%\"\n      :span-method=\"objectSpanMethod\">\n      <el-table-column\n        label=\"分类\"\n        width=\"150\">\n        <template slot-scope=\"{row}\">\n          <span>第{{ row.cate }}类别</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"id\"\n        label=\"id\"\n        width=\"150\">\n      </el-table-column>\n      <el-table-column\n        prop=\"cate\"\n        label=\"cate值\"\n        width=\"150\">\n      </el-table-column>\n      <el-table-column\n        prop=\"text\"\n        label=\"text\"\n        width=\"500\">\n      </el-table-column>\n      <el-table-column\n        prop=\"text2\"\n        label=\"text2\"\n        width=\"500\">\n      </el-table-column>\n      <el-table-column\n        fixed=\"right\"\n        label=\"操作\"\n        width=\"100\">\n        <template slot-scope=\"{row}\">\n          <el-button @click=\"onDel(row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </virtual-scroll>\n</div>\n","<template>\n  <div>\n    <virtual-scroll\n      ref=\"virtualScroll\"\n      key-prop=\"id\"\n      :data=\"list\"\n      :item-size=\"62\"\n      :row-span-key=\"getRowSpanKey\"\n      @change=\"(virtualList) => tableData = virtualList\">\n      <el-table\n        :data=\"tableData\"\n        ref=\"table\"\n        border\n        row-key=\"id\"\n        height=\"600px\"\n        style=\"width: 100%\"\n        :span-method=\"objectSpanMethod\">\n        <el-table-column\n          label=\"分类\"\n          width=\"150\">\n          <template slot-scope=\"{row}\">\n            <span>第{{ row.cate }}类别</span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"id\"\n          label=\"id\"\n          width=\"150\">\n        </el-table-column>\n        <el-table-column\n          prop=\"cate\"\n          label=\"cate值\"\n          width=\"150\">\n        </el-table-column>\n        <el-table-column\n          prop=\"text\"\n          label=\"text\"\n          width=\"500\">\n        </el-table-column>\n        <el-table-column\n          prop=\"text2\"\n          label=\"text2\"\n          width=\"500\">\n        </el-table-column>\n        <el-table-column\n          fixed=\"right\"\n          label=\"操作\"\n          width=\"100\">\n          <template slot-scope=\"{row}\">\n            <el-button @click=\"onDel(row)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </virtual-scroll>\n  </div>\n</template>\n\n<script>\nimport VirtualScroll from 'el-table-virtual-scroll'\nimport { mockData } from '@/utils'\n\nexport default {\n  components: {\n    VirtualScroll\n  },\n  data () {\n    return {\n      list: mockData(0, 2000),\n      tableData: []\n    }\n  },\n  methods: {\n    // 处理列表数据行合并，根据cate来分组合并\n    handleListRowSpan () {\n      let prevItem\n      this.list.forEach(item => {\n        // 如果cate值相同，则增加合并行数\n        if (prevItem?.cate === item.cate) {\n          prevItem.rowspan++\n          item.rowspan = 0\n        } else {\n          item.rowspan = 1 // 初始化合并行数\n          prevItem = item\n        }\n      })\n      console.log(this.list.map(item => item.rowspan), '合并')\n    },\n    // 表格合并行\n    objectSpanMethod ({row, columnIndex}) {\n      if (columnIndex === 0) {\n        if (row.rowspan) {\n          return {\n            rowspan: row.rowspan,\n            colspan: 1\n          }\n        } else {\n          return {\n            rowspan: 0,\n            colspan: 0\n          }\n        }\n      }\n    },\n    // 合并行中共用相同的key值\n    getRowSpanKey (row) {\n      return row.cate\n    },\n    onDel (row) {\n      const index = this.list.findIndex(item => item === row)\n      if (index > -1) {\n        this.list.splice(index, 1)\n        this.handleListRowSpan() // 重新计算合并行\n        this.$refs.table.doLayout()\n      }\n    }\n  },\n  created () {\n    this.handleListRowSpan()\n  }\n}\n</script>\n\n<style lang='less' scoped>\n\n</style>\n"],"names":["render","_vm","_h","_c","virtualList","ref","row","$event","staticRenderFns","__vue2_script","VirtualScroll","mockData","prevItem","item","columnIndex","index"],"mappings":"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"}