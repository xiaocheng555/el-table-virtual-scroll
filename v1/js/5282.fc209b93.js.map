{"version":3,"file":"js/5282.fc209b93.js","mappings":"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","sources":["webpack://el-table-virtual-scroll/./src/views/VTreeDemo2.vue","webpack://el-table-virtual-scroll/src/views/VTreeDemo2.vue","webpack://el-table-virtual-scroll/./src/views/VTreeDemo2.vue?f500","webpack://el-table-virtual-scroll/./src/views/VTreeDemo2.vue?7aa5"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',[_c('el-button',{on:{\"click\":_vm.expand1}},[_vm._v(\"展开第一层\")]),_c('el-button',{on:{\"click\":_vm.expand2}},[_vm._v(\"展开第二层\")]),_c('el-button',{on:{\"click\":_vm.expandAll}},[_vm._v(\"展开全部\")]),_c('el-button',{on:{\"click\":_vm.unexpandAll}},[_vm._v(\"收起全部\")]),_c('el-button',{on:{\"click\":_vm.unexpandTarget}},[_vm._v(\"展开目标路径\")])],1),_c('VirtualScroll',{ref:\"virtualScroll\",staticClass:\"visual-table\",attrs:{\"data\":_vm.treeData,\"item-size\":48,\"key-prop\":\"id\"},on:{\"update:data\":function($event){_vm.treeData=$event},\"change\":(virtualList) => (_vm.tableData = virtualList)}},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"tableRef\",attrs:{\"data\":_vm.tableData,\"height\":\"calc(100vh - 150px)\",\"highlight-current-row\":true,\"row-key\":\"id\"}},[_c('VirtualColumn',{ref:\"virtualColumn\",attrs:{\"type\":\"tree\",\"indent\":40,\"minWidth\":300,\"label\":\"\",\"prop\":\"product\",\"load\":_vm.onload},scopedSlots:_vm._u([{key:\"default\",fn:function({ row }){return [(row['describe'])?_c('div',{staticStyle:{\"line-height\":\"1.2em\"}},[_c('div',[_vm._v(\" \"+_vm._s(row[\"product\"])+\" \")]),_c('div',{staticStyle:{\"color\":\"grey\",\"font-size\":\"12px\"}},[_vm._v(\" \"+_vm._s(row[\"describe\"])+\" \")])]):_c('div',{staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(\" \"+_vm._s(row[\"product\"])+\" \")])]}}])}),_c('el-table-column',{attrs:{\"minWidth\":100,\"label\":\"id\",\"prop\":\"id\"}}),_c('el-table-column',{attrs:{\"minWidth\":100,\"label\":\"随机名\",\"prop\":\"database\"}}),_c('el-table-column',{attrs:{\"minWidth\":40,\"label\":\"排序\",\"prop\":\"rank\"}}),_c('el-table-column',{attrs:{\"minWidth\":60,\"label\":\"数据\",\"prop\":\"status\"}})],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div>\n      <el-button @click=\"expand1\">展开第一层</el-button>\n      <el-button @click=\"expand2\">展开第二层</el-button>\n      <el-button @click=\"expandAll\">展开全部</el-button>\n      <el-button @click=\"unexpandAll\">收起全部</el-button>\n      <el-button @click=\"unexpandTarget\">展开目标路径</el-button>\n    </div>\n    <VirtualScroll\n      ref=\"virtualScroll\"\n      class=\"visual-table\"\n      :data.sync=\"treeData\"\n      :item-size=\"48\"\n      key-prop=\"id\"\n      @change=\"(virtualList) => (tableData = virtualList)\">\n      <el-table\n        ref=\"tableRef\"\n        v-loading=\"loading\"\n        :data=\"tableData\"\n        height=\"calc(100vh - 150px)\"\n        :highlight-current-row=\"true\"\n        row-key=\"id\">\n        <VirtualColumn\n          ref=\"virtualColumn\"\n          type=\"tree\"\n          :indent=\"40\"\n          :minWidth=\"300\"\n          label=\"\"\n          prop=\"product\"\n          :load=\"onload\">\n          <template slot-scope=\"{ row }\">\n            <div v-if=\"row['describe']\" style=\"line-height: 1.2em\">\n              <div>\n                {{ row[\"product\"] }}\n              </div>\n              <div style=\"color: grey; font-size: 12px\">\n                {{ row[\"describe\"] }}\n              </div>\n            </div>\n            <div v-else style=\"white-space: nowrap\">\n              {{ row[\"product\"] }}\n            </div>\n          </template>\n        </VirtualColumn>\n        <el-table-column :minWidth=\"100\" label=\"id\" prop=\"id\"></el-table-column>\n        <el-table-column :minWidth=\"100\" label=\"随机名\" prop=\"database\"></el-table-column>\n        <el-table-column :minWidth=\"40\" label=\"排序\" prop=\"rank\"></el-table-column>\n        <el-table-column :minWidth=\"60\" label=\"数据\" prop=\"status\"></el-table-column>\n      </el-table>\n    </VirtualScroll>\n  </div>\n</template>\n\n<script>\nimport VirtualScroll, { VirtualColumn } from 'el-table-virtual-scroll'\nimport cloneDeep from 'lodash/cloneDeep'\nimport datamap from '../datamap.json'\n\nexport default {\n  name: 'VTreeDemo2',\n  components: {\n    VirtualScroll,\n    VirtualColumn,\n  },\n  data() {\n    return {\n      tableData: [],\n      treeData: [],\n      loading: false,\n      dataMap: {}\n    };\n  },\n  mounted () {\n    this.initData()\n  },\n  methods: {\n    initData() {\n      this.dataMap = datamap\n      this.treeData = [\n        {\n          id: \"49__@@__1\",\n          product: \"产品线\",\n          productId: 49,\n          parent: null,\n          isRoot: true,\n          $v_level: 1\n        },\n        {\n          id: \"-1__@@__4690\",\n          product: \"未归类头部表\",\n          productId: -1,\n          parent: null,\n          isRoot: true,\n          $v_level: 1\n        }\n      ]\n    },\n    async onload (row, resolve) {\n      setTimeout(() => {\n        resolve(cloneDeep(this.dataMap[row.id] || []))\n      }, 200)\n    },\n    expand (level) {\n      const expandKeys = this.treeData.filter(item => item.$v_level === level).map(item => item.id)\n      return this.$refs.virtualColumn.expand(expandKeys).then(() => {\n        console.log(`展开第${level}层完成`)\n      })\n    },\n    async expand1 () {\n      this.$refs.virtualColumn.unexpandAll()\n      await this.expand(1)\n    },\n    async expand2 () {\n      this.$refs.virtualColumn.unexpandAll()\n      await this.expand(1)\n      await this.expand(2)\n    },\n    unexpandAll () {\n      this.$refs.virtualColumn.unexpandAll()\n    },\n    expandAll () {\n      this.$refs.virtualColumn.expandAll()\n    },\n    async unexpandTarget () {\n      const pathKeys = ['49__@@__1', '120__@@__4200', '114__@@__4201', '2902__@@__4324']\n      const key = await this.$refs.virtualColumn.expandPath(pathKeys)\n      key && this.scrollTo(key)\n    },\n    scrollTo (key) {\n      if (key) {\n        const index = this.treeData.findIndex((item) => item['id'] === key)\n        this.$refs.virtualScroll.scrollTo(index, 50)\n        const speed = 300\n        // 闪烁效果\n        setTimeout(() => {\n          this.$refs['tableRef'].setCurrentRow(this.treeData[index])\n        })\n        setTimeout(() => {\n          this.$refs['tableRef'].setCurrentRow(null)\n        }, speed)\n        setTimeout(() => {\n          this.$refs['tableRef'].setCurrentRow(this.treeData[index])\n        }, speed * 2)\n        setTimeout(() => {\n          this.$refs['tableRef'].setCurrentRow(null)\n        }, speed * 3)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n/deep/ .cell {\n  display: flex;\n  align-items: center;\n  overflow: unset !important;\n}\n\n.visual-table {\n  width: 100%;\n  height: 80vh;\n  border: 1px solid #eee;\n  border-radius: 4px;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VTreeDemo2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./VTreeDemo2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VTreeDemo2.vue?vue&type=template&id=1074fd4e&scoped=true&\"\nimport script from \"./VTreeDemo2.vue?vue&type=script&lang=js&\"\nexport * from \"./VTreeDemo2.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VTreeDemo2.vue?vue&type=style&index=0&id=1074fd4e&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1074fd4e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","on","expand1","_v","expand2","expandAll","unexpandAll","unexpandTarget","ref","staticClass","attrs","treeData","$event","virtualList","tableData","directives","name","rawName","value","loading","expression","onload","scopedSlots","_u","key","fn","row","staticStyle","_s","staticRenderFns","components","VirtualScroll","VirtualColumn","data","dataMap","mounted","methods","initData","id","product","productId","parent","isRoot","$v_level","resolve","setTimeout","expand","level","console","pathKeys","scrollTo","speed","component"],"sourceRoot":""}