{"version":3,"file":"ExpandDemo-CQuNxO5B.js","sources":["../../src/views/ExpandDemo.vue?vue&type=template&lang.js","../../src/views/ExpandDemo.vue"],"sourcesContent":["\n<div>\n  <virtual-scroll\n    ref=\"virtualScroll\"\n    :data=\"list\"\n    :item-size=\"62\"\n    key-prop=\"id\"\n    @change=\"onVirtualChange\">\n    <el-table\n      ref=\"table\"\n      :data=\"tableData\"\n      height=\"600\"\n      row-key=\"id\"\n      :class=\"isExpanding ? 'is-expanding' : ''\"\n      style=\"width: 100%\"\n      :row-class-name=\"rowClassName\"\n      @expand-change=\"onExpandChange\">\n      <el-table-column type=\"expand\">\n        <template slot-scope=\"props\">\n          <el-form label-position=\"left\" inline class=\"demo-table-expand\">\n            <el-form-item label=\"商品名称\">\n              <span>{{ props.row.name }}</span>\n            </el-form-item>\n            <el-form-item label=\"所属店铺\">\n              <span>{{ props.row.shop }}</span>\n            </el-form-item>\n            <el-form-item label=\"商品 ID\">\n              <span>{{ props.row.id }}</span>\n            </el-form-item>\n            <el-form-item label=\"店铺 ID\">\n              <span>{{ props.row.shopId }}</span>\n            </el-form-item>\n            <el-form-item label=\"商品分类\">\n              <span>{{ props.row.category }}</span>\n            </el-form-item>\n            <el-form-item label=\"店铺地址\">\n              <span>{{ props.row.address }}</span>\n            </el-form-item>\n            <el-form-item label=\"商品描述\">\n              <span>{{ props.row.desc }}</span>\n            </el-form-item>\n          </el-form>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"商品 ID\"\n        prop=\"id\">\n      </el-table-column>\n      <el-table-column\n        label=\"商品名称\"\n        prop=\"name\">\n      </el-table-column>\n      <el-table-column\n        label=\"描述\"\n        prop=\"desc\">\n      </el-table-column>\n    </el-table>\n  </virtual-scroll>\n</div>\n","<template>\n  <div>\n    <virtual-scroll\n      ref=\"virtualScroll\"\n      :data=\"list\"\n      :item-size=\"62\"\n      key-prop=\"id\"\n      @change=\"onVirtualChange\">\n      <el-table\n        ref=\"table\"\n        :data=\"tableData\"\n        height=\"600\"\n        row-key=\"id\"\n        :class=\"isExpanding ? 'is-expanding' : ''\"\n        style=\"width: 100%\"\n        :row-class-name=\"rowClassName\"\n        @expand-change=\"onExpandChange\">\n        <el-table-column type=\"expand\">\n          <template slot-scope=\"props\">\n            <el-form label-position=\"left\" inline class=\"demo-table-expand\">\n              <el-form-item label=\"商品名称\">\n                <span>{{ props.row.name }}</span>\n              </el-form-item>\n              <el-form-item label=\"所属店铺\">\n                <span>{{ props.row.shop }}</span>\n              </el-form-item>\n              <el-form-item label=\"商品 ID\">\n                <span>{{ props.row.id }}</span>\n              </el-form-item>\n              <el-form-item label=\"店铺 ID\">\n                <span>{{ props.row.shopId }}</span>\n              </el-form-item>\n              <el-form-item label=\"商品分类\">\n                <span>{{ props.row.category }}</span>\n              </el-form-item>\n              <el-form-item label=\"店铺地址\">\n                <span>{{ props.row.address }}</span>\n              </el-form-item>\n              <el-form-item label=\"商品描述\">\n                <span>{{ props.row.desc }}</span>\n              </el-form-item>\n            </el-form>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label=\"商品 ID\"\n          prop=\"id\">\n        </el-table-column>\n        <el-table-column\n          label=\"商品名称\"\n          prop=\"name\">\n        </el-table-column>\n        <el-table-column\n          label=\"描述\"\n          prop=\"desc\">\n        </el-table-column>\n      </el-table>\n    </virtual-scroll>\n  </div>\n</template>\n\n<script>\nimport VirtualScroll from 'el-table-virtual-scroll'\nimport { mockData } from '@/utils'\n\nexport default {\n  components: {\n    VirtualScroll\n  },\n  data () {\n    return {\n      list: mockData(0, 2000),\n      tableData: [],\n      expandRows: [],\n      isExpanding: false // 手动控制展开时，阻止展开图标抖动\n    }\n  },\n  methods: {\n    rowClassName ({ row }) {\n      return `row_${row.id}`\n    },\n    async onVirtualChange (virtualList) {\n      this.tableData = virtualList\n      this.isExpanding = true\n      await this.$nextTick()\n      this.expandRows.forEach(row => {\n        this.$refs.table?.toggleRowExpansion?.(row, true)\n      })\n      setTimeout(() => {\n        this.isExpanding = false\n      }, 10)\n    },\n    onExpandChange (row) {\n      const rowEl = document.querySelector(`.row_${row.id}`)\n      if (rowEl) {\n        const isExpand = !rowEl.className.includes('expanded')\n        if (isExpand) {\n          if (!this.expandRows.includes(row)) {\n            this.expandRows.push(row)\n          }\n        } else {\n          this.expandRows = this.expandRows.filter(expandRow => expandRow !== row)\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style lang='less' scoped>\n.demo-table-expand {\n  font-size: 0;\n}\n.demo-table-expand label {\n  width: 90px;\n  color: #99a9bf;\n}\n.demo-table-expand .el-form-item {\n  margin-right: 0;\n  margin-bottom: 0;\n  width: 50%;\n}\n/deep/ .is-expanding {\n  .el-table__expand-icon {\n    transition: none;\n  }\n}\n</style>\n"],"names":["render","_vm","_h","_c","props","staticRenderFns","__vue2_script","VirtualScroll","mockData","row","virtualList","_b","_a","rowEl","expandRow"],"mappings":"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"}