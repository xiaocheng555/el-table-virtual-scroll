"use strict";(self["webpackChunkel_table_virtual_scroll"]=self["webpackChunkel_table_virtual_scroll"]||[]).push([[865],{2277:function(e,t,l){l.d(t,{Z:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("el-table-column",e._g(e._b({attrs:{"class-name":e.isTree?"el-table__row--level":""},scopedSlots:e._u([{key:"header",fn:function(l){return[e._t("header",(function(){return["v-selection"===l.column.type?t("el-checkbox",{attrs:{indeterminate:e.isCheckedImn},on:{change:e.onCheckAllRows},model:{value:e.isCheckedAll,callback:function(t){e.isCheckedAll=t},expression:"isCheckedAll"}}):[e._v(" "+e._s(l.column.label)+" ")]]}),null,l)]}},{key:"default",fn:function(l){return[l.column&&"v-tree"===l.column.type?[t("span",{staticClass:"el-table__indent",style:{paddingLeft:(l.row.$level-1)*e.indent+"px"}}),!1!==l.row.$v_hasChildren?t("div",{staticClass:"el-table__expand-icon",class:l.row.$v_expanded?"el-table__expand-icon--expanded":"",on:{click:function(t){return e.onTreeNodeExpand(l.row)}}},[l.row.$v_loading?t("i",{staticClass:"el-icon-loading"}):t("i",{staticClass:"el-icon-arrow-right"})]):t("span",{staticClass:"el-table__placeholder"})]:e._e(),e._t("default",(function(){return["v-selection"===l.column.type?t("el-checkbox",{attrs:{value:l.row.$v_checked},on:{change:function(t){return e.onCheckRow(l.row,!l.row.$v_checked)}}}):e._e(),"v-radio"===l.column.type?t("el-radio",{attrs:{label:!0,value:e.virtualScroll.curRow===l.row},on:{change:function(t){return e.onRadioChange(l.row)}}},[t("span")]):"v-index"===l.column.type?t("span",[e._v(" "+e._s(e.getIndex(l))+" ")]):[e._v(" "+e._s(l.row[l.column.property])+" ")]]}),null,l)]}}],null,!0)},"el-table-column",e.$attrs,!1),e.$listeners))},s=[],n={name:"el-table-virtual-column",inject:["virtualScroll"],props:{load:{type:Function},indent:{type:Number,default:16}},data(){return{isCheckedAll:!1,isCheckedImn:!1,isTree:!1}},methods:{onCheckAllRows(e){e=!!this.isCheckedImn||e,this.virtualScroll.checkAll(e),this.isCheckedAll=e,this.isCheckedImn=!1},onCheckRow(e,t){this.virtualScroll.checkRow(e,t);const l=this.virtualScroll.data,a=l.filter((e=>!0===e.$v_checked)).length;0===a?(this.isCheckedAll=!1,this.isCheckedImn=!1):a===l.length?(this.isCheckedAll=!0,this.isCheckedImn=!1):(this.isCheckedAll=!1,this.isCheckedImn=!0)},onRadioChange(e){this.virtualScroll.setCurrentRow(e)},getIndex(e){const t=this.virtualScroll.start+e.$index;return"function"===typeof this.$attrs.index?this.$attrs.index(t):t+1},onTreeNodeExpand(e){this.$set(e,"$v_expanded",!e.$v_expanded),e.$v_expanded?this.loadChildNodes(e):this.hideChildNodes(e)},loadChildNodes(e){if(e.$v_loaded){const t=this.virtualScroll.data,l=t.findIndex((t=>t===e));l>-1&&this.virtualScroll.updateData([...t.slice(0,l+1),...e.$v_hideNodes,...t.slice(l+1)])}else this.$set(e,"$v_loading",!0),this.load&&this.load(e,t.bind(this));function t(t){Array.isArray(!t)&&(t=[]),this.$set(e,"$v_loading",!1),this.$set(e,"$v_loaded",!0),this.$set(e,"$v_hasChildren",!!t.length),t.forEach((t=>{t.$level="number"===typeof e.$level?e.$level+1:2}));const l=this.virtualScroll.data,a=l.findIndex((t=>t===e));a>-1&&this.virtualScroll.updateData([...l.slice(0,a+1),...t,...l.slice(a+1)])}},hideChildNodes(e){const t=this.virtualScroll.data,l=t.findIndex((t=>t===e));if(-1===l)return;const a=[];for(let n=l+1;n<t.length;n++){const l=t[n];if((l.$level||1)<=(e.$level||1))break;a.push(l)}this.$set(e,"$v_hideNodes",a);const s=t.filter((e=>!a.includes(e)));this.virtualScroll.updateData(s),this.virtualScroll.update()}},beforeCreate(){const{type:e}=this.$attrs;["index","selection","radio","tree"].includes(e)&&(this.$attrs.type="v-"+e)},created(){const{type:e}=this.$attrs;"expand"===e?this.virtualScroll.isExpandType=!0:"v-tree"===e&&(this.isTree=!0)}},i=n,o=l(3736),r=(0,o.Z)(i,a,s,!1,null,"2a13bf83",null),c=r.exports},5305:function(e,t,l){l.r(t),l.d(t,{default:function(){return h}});var a=function(){var e=this,t=e._self._c;return t("div",[t("virtual-scroll",{ref:"virtualScroll",attrs:{data:e.list,"item-size":62,"key-prop":"id"},on:{change:e.onVirtualChange}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"600","row-key":"id"}},[t("virtual-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[t("el-form-item",{attrs:{label:"商品名称"}},[t("span",[e._v(e._s(l.row.name))])]),t("el-form-item",{attrs:{label:"所属店铺"}},[t("span",[e._v(e._s(l.row.shop))])]),t("el-form-item",{attrs:{label:"商品 ID"}},[t("span",[e._v(e._s(l.row.id))])]),t("el-form-item",{attrs:{label:"店铺 ID"}},[t("span",[e._v(e._s(l.row.shopId))])]),t("el-form-item",{attrs:{label:"商品分类"}},[t("span",[e._v(e._s(l.row.category))])]),t("el-form-item",{attrs:{label:"店铺地址"}},[t("span",[e._v(e._s(l.row.address))])]),t("el-form-item",{attrs:{label:"商品描述"}},[t("span",[e._v(e._s(l.row.desc))])])],1)]}}])}),t("el-table-column",{attrs:{label:"商品 ID",prop:"id"}}),t("el-table-column",{attrs:{label:"商品名称",prop:"name"}}),t("el-table-column",{attrs:{label:"描述",prop:"desc"}})],1)],1)],1)},s=[],n=l(5677),i=l(2277),o={components:{VirtualScroll:n.Z,VirtualColumn:i.Z},data(){return{list:[],tableData:[],loading:!1}},methods:{fetchData(){this.loading=!0,this.list=[],setTimeout((()=>{this.list=[];for(let e=1;e<2e3;e++){const t=this.getRandomContent(),l=this.getRandomContent();this.list.push({id:e,show:!1,text:t,text2:l,hasChildren:!0})}this.loading=!1}),1e3)},getRandomContent(){const e=["这是一条测试数据","君不见黄河之水天上来，奔流到海不复回。","十年生死两茫茫","寻寻觅觅，冷冷清清，凄凄惨惨戚戚。","桃花坞里桃花庵，桃花庵里桃花仙；桃花仙人种桃树，又摘桃花卖酒钱。","明月几时有，把酒问青天。","槛菊愁烟兰泣露，罗幕轻寒，","寒蝉凄切，对长亭晚，骤雨初歇。都门帐饮无绪，留恋处，兰舟催发。执手相看泪眼，竟无语凝噎。念去去，千里烟波，暮霭沉沉楚天阔。多情自古伤离别，更那堪冷落清秋节！今宵酒醒何处？杨柳岸，晓风残月。此去经年，应是良辰好景虚设。便纵有千种风情，更与何人说？","红豆生南国，春来发几枝。","黄鹂"],t=Math.floor(10*Math.random());return e[t]},async onVirtualChange(e){this.tableData=e}},created(){this.fetchData()}},r=o,c=l(3736),d=(0,c.Z)(r,a,s,!1,null,"97f05c3a",null),h=d.exports}}]);
//# sourceMappingURL=865.c161f984.js.map