import{V as s}from"./el-table-virtual-column.vue_vue_type_style_index_0_lang-DWl8J-iF.js";import{V as d}from"./el-table-virtual-column-BCzQT84F.js";import{g as a}from"./utils-4sfz355c.js";import{n as c}from"./index-b4RXg8tS.js";var u=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("virtual-scroll",{ref:"virtualScroll",attrs:{data:t.list,"item-size":62,"key-prop":"id"},on:{"update:data":function(l){t.list=l},change:function(l){return t.tableData=l}}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"500px",border:"","tree-props":{hasChildren:"hasChildren",children:"children"},load:t.onload,"row-key":"id"},on:{"expand-change":t.handleExpandChange}},[e("virtual-column",{attrs:{width:"500",label:"id",prop:"id",type:"tree"}}),e("el-table-column",{attrs:{label:"内容",prop:"text"}}),e("el-table-column",{attrs:{width:"150",label:"是否有子节点",prop:"text"},scopedSlots:t._u([{key:"default",fn:function(l){var o=l.row;return[o.hasChildren?e("span",[t._v("lazy load")]):e("span",[t._v("/")])]}}])}),e("el-table-column",{attrs:{label:"操作",width:"260"},scopedSlots:t._u([{key:"default",fn:function(l){var o=l.row;return[e("el-button",{attrs:{type:"text"},on:{click:function(r){return t.toggleRowExpansion(o)}}},[t._v("切换展开收起")]),e("el-button",{attrs:{type:"text"},on:{click:function(r){return t.insertChild(o)}}},[t._v("插入子节点")]),e("el-button",{attrs:{type:"text"},on:{click:function(r){return t.insertChildAndExpand(o)}}},[t._v("插入子节点并展开")]),e("el-button",{attrs:{type:"text"},on:{click:function(r){return t.onDel(o)}}},[t._v("删除")]),e("el-button",{attrs:{type:"text"},on:{click:function(r){return t.onEdit(o)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"text"},on:{click:function(r){return t.reload(o)}}},[t._v("reload")]),e("el-button",{attrs:{type:"text"},on:{click:function(r){return t.getChildNodes(o)}}},[t._v("子节点")]),e("el-button",{attrs:{type:"text"},on:{click:function(r){return t.getParentNodes(o)}}},[t._v("父节点")])]}}])})],1),e("el-button",{on:{click:t.refresh}},[t._v("refresh")]),e("el-button",{on:{click:t.setRowKeys}},[t._v("setRowKeys([1, 2, 3])")])],1)],1)},h=[];const p={components:{VirtualScroll:s,VirtualColumn:d},data(){return{loading:!1,list:a(10),tableData:[],expandRowKeys:[1,2,3,4]}},methods:{onload(t,n,e){setTimeout(()=>{if(Math.random()>.5)return t.hasChildren=!1,e([]);t.hasChildren=!0,e(a(5,t.id))},1e3)},reload(t){t.hasChildren=null,this.$refs.virtualScroll.reloadNode(t)},onDel(t){},onEdit(t){t.text=t.text+"__编辑"},getChildNodes(t){const n=this.$refs.virtualScroll.getChildNodes(t);console.log("子节点：",n,n.map(e=>e.id))},getParentNodes(t){const n=this.$refs.virtualScroll.getParentNodes(t);console.log("父节点：",n,n.map(e=>e.id))},refresh(){this.list=a(1e3)},setRowKeys(){this.expandRowKeys=[1,2,3]},handleExpandChange(t,n){console.log("handleExpandChange",t,n)},toggleRowExpansion(t){this.$refs.table.toggleRowExpansion(t)},insertChild(t){t.children?t.children.push(...a(1,Date.now())):this.$set(t,"children",a(1,Date.now()))},insertChildAndExpand(t){this.$refs.table.toggleRowExpansion(t,!0),this.insertChild(t)}},created(){console.log(this.list,"tree list")}},i={};var f=c(p,u,h,!1,v,"0a3d5c55");function v(t){for(let n in i)this[n]=i[n]}const b=function(){return f.exports}();export{b as default};
//# sourceMappingURL=VTreeExpandDemo-D6js6Apy.js.map
